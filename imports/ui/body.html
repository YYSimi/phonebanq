<!-- This is pretty wrong, but we'll fix it up later. -->

<template name="main">
  {{>mainActual fUseContainer=true}}
</template>

<template name="mainNoContainer">
  {{>mainActual fUseContainer=false}}
</template>

<template name="mainLoginRequired">
  {{>mainActual fUseContainer=true fLoginRequired=true}}
</template>

<template name="mainActual">
  {{> nav}}
  <div class="website-body">
    {{#if fLoginRequired}}
      {{#if currentUser}}
        <div class="left-column">
          {{> userInfoDisplay}}
          {{> userDashboardNav}}
        </div>
        <div class="{{#if fUseContainer}} container left-container below-nav {{/if}}">
          <div class="col-xs-12 col-sm-9">
            {{> yield}}
          </div>
        </div>
      {{else}}
        {{#if loggingIn}}
          {{> loader}}
        {{else}}
          {{> loginRequired}}
        {{/if}}
      {{/if}}
    {{else}}
    <div class="{{#if fUseContainer}} container below-nav {{/if}}">
      {{> yield}}
    </div>
    {{/if}}


  </div>
  {{> footer}}
</template>