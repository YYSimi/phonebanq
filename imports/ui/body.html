<!-- This is pretty wrong, but we'll fix it up later. -->

<template name="main">
  {{>mainActual fUseContainer=true}}
</template>

<template name="mainNoContainer">
  {{>mainActual fUseContainer=false}}
</template>

<template name="mainLoginRequired">
  {{>mainActual fUseContainer=true fLoginRequired=true}}
</template>

<template name="mainActual">
  {{> nav}}
  <div class="{{#if fUseContainer}} container below-nav {{/if}}">
    {{#if fLoginRequired}}
      {{#if currentUser}}
        <div class="row">
          <div class="col-xs-12 col-sm-3">
            {{> userInfoDisplay}}
          </div>
          <div class="col-xs-12 col-sm-9">
            {{> yield}}
          </div>
        </div>
      {{else}}
        {{#if loggingIn}}
          {{> loader}}
        {{else}}
          {{> loginRequired}}
        {{/if}}
      {{/if}}
    {{else}}
      {{> yield}}
    {{/if}}
  </div>


  <hr/>
  {{> footer}}
</template>