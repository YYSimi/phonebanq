<template name="anonymousTasks">
  {{#if currentUser}}
    {{> myTasks}}
  {{else}}
    {{> anonymousTasksActual }}
  {{/if}}
</template>

<template name="anonymousTasksActual">
  <p>  Go beyond casting your single, solitary vote at the ballot box and start making your voice heard.  Grassroots Champion is a left-leaning civic engagement platform that streamlines, organizes, and generates a daily task list for activism.  Using your interests and location, we can point you towards meaningful civic action opportunities for causes that you care about. </p>
  <p>  Right now, Grassroots Champion is oriented towards getting citizens to call their Senators and Representatives about issues that matter to them.  Phone calls are the most effective means of reaching your representatives short of going to their office in-person (we'll be encouraging in-person visits too in the near future).  If you think phone calls are ineffective, read <a href="http://www.attn.com/stories/12768/former-congressional-staffer-explains-how-to-make-congressman-listen"> this former congressional staffer's testimonial </a> to learn why your calls matter.</p>
  <p>  This site is currently a work-in-progress.  Pardon our dust and exposed wiring -- we're working hard to turn this idea into reality.  This site is also all about activism and involvement.  That means we want our users involved in this siteâ€™s evolution and to eventually be creating content such as tasks.  Fill out our <a href="{{pathFor route='feedback'}}">feedback form</a> or contact us directly (grassrootschampion@gmail.com) if you are interested in collaborating on this project. </p>
  <p>  Enter your city and state below for a sample call to action, or create an account to receive regular updates, track your progress, and help us provide you with the opportunities that are most relavent to you.</p>
  <div class="row">
    <div class="col-xs-5"> {{> credentialsPrompt}} </div>
    <div class="col-xs-2"> <h4 class="text-center"> -or- </h4> </div>
    <div class="col-xs-5"> {{> provideLocation}} </div>
  </div>
  <hr />
  {{#if fShouldShowTasks}}
    {{#if Template.subscriptionsReady}}
      <ul class="list-group js-userTasks-list">
        {{#each taskAndDetail in getTopTasks}}
          <li class="list-group-item" style="border: none">
            {{> UserTask context=taskAndDetail buttonsTemplate="noTaskButtons"}}
          </li>
        {{/each}}
      </ul>
    {{else}}
    <!-- TODO:  This never displays for some reason.  Subscriptions always seem ready, even when we're waiting. -->
      {{> loader}}
    {{/if}}
  {{/if}}

</template>

<template name="noTaskButtons">
</template>

<template name="credentialsPrompt">
  <div class="well well-sm">
  <h4> Create an Account: </h4>
    {{#if fShowRegistrationUi}}
      {{> register}}
    {{else}}
      <button class="btn btn-primary btn-face"> Login with Facebook </button>
      <p> - or - </p>
      <button class="btn btn-success btn-show-registration"> Register with us </button>
    {{/if}}
  </div>
</template>

<template name="provideLocation">
  <div class="well well-sm">
    <h4> Tell us where you're from: </h4>
    {{> setLocation}}
  </div>
</template>

<!-- TODO:  Eliminate code duplication between this and userSettings. -->
<template name="setLocation">
  <form>
    <!-- TODO:  Start using this or remove it entirely.
    <div class="form-group row">
      <label for="user-street" class="col-xs-2 col-form-label"> Street </label>
      <div class="col-xs-10">
        <input class="form-control" type="text" placeholder="Enter street address" id="user-street"/>
      </div>
    </div>
    -->

    <div class="form-group row">
      <label for="user-city" class="col-xs-2 col-form-label"> City </label>
      <div class="col-xs-10">
        <input class="form-control" type="text" placeholder="Enter city" id="user-city"/>
      </div>
    </div>

    <div class="form-group row">
      <label for="user-state" class="col-xs-3 col-sm-2 col-form-label"> State </label>
      <div class="col-xs-9 col-sm-10">
        <!-- TODO:  Enable select2 here or standardize on no-select2. -->
        <select class="form-control" id="user-state">
          <option disabled value="na"> Select State </option>
          {{> selectStates}}
        </select>
      </div>
    </div>

    <div class="form-group row">
      <label for="user-zip" class="col-xs-2 col-form-label"> Zip Code </label>
      <div class="col-xs-10">
        <input class="form-control" type="text" placeholder="Enter zip code" id="user-zip"/>
      </div>
    </div>
    
    <input type="submit" class="btn btn-success js-location-submit" value="Give me something to do!"/>
    {{#if fShouldRenderStatusText}}
      <p>{{renderStatusText}}</p>
    {{/if}}
  </form>
</template>

<!-- TODO:  Put this someplace better. Finish implementation.-->
<template name="loginPane">
  <div id="login-buttons">
    <div class="login-text-and-button">
      <div class="login-button single-login-button " id="login-buttons-facebook">
        <div class="login-image" id="login-buttons-image-facebook"></div>
        <span id="sign-in-facebook" class="text-besides-image sign-in-text-facebook">Sign in with Facebook</span>
      </div>
      <br>
    </div>
    <div class="login-text-and-button">
      <div class="login-button single-login-button " id="login-buttons-google">
        <div class="login-image" id="login-buttons-image-google"></div>
        <span id="sign-in-google" class="text-besides-image sign-in-text-google">Sign in with Google</span> 
      </div>
    </div>
  </div>
</template>