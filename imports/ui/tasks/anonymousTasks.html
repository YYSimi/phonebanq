<template name="anonymousTasks">
  {{#if currentUser}}
    {{> myTasks}}
  {{else}}
    {{> anonymousTasksActual }}
  {{/if}}
</template>

<template name="anonymousTasksActual">
  <p> Welcome to {{> appName}}.  Please create an account and then update your settings to reflect your current location.</p>
  <p> Creating account lets you keep track of what you've accomplished, lets us notify you about calls to action, and (soon) gives you access to events and calls to action near your location. </p>
  <p> If you log-in using facebook, we'll automatically fill in your location and send you once daily reminders when we send out new calls to action.  (TODO:  Letting you customize how often we send those).  Facebook login currently requires administrator approval, so contact the maintainer (you should know who that is if you found this website) to get that access. </p>
  <p> Without an account, you can browse our most important calls to action.  Enter your location so that we can locate your representatives and senators. </p>
  <div class="row">
    <div class="col-xs-5"> {{> createAccount}} </div>
    <div class="col-xs-2"> <p class="text-center"> -or- </p> </div>
    <div class="col-xs-5"> {{> provideLocation}} </div>
  </div>
  <hr />
  {{#if Template.subscriptionsReady}}
    <ul class="list-group js-userTasks-list">
      {{#each taskAndDetail in getTopTasks}}
        <li class="list-group-item" style="border: none">
          {{> UserTask context=taskAndDetail buttonsTemplate="noTaskButtons"}}
        </li>
      {{/each}}
    </ul>
  {{else}}
  <!-- TODO:  This never displays for some reason.  Subscriptions always seem ready, even when we're waiting. -->
    {{> loader}}
  {{/if}}

</template>

<template name="noTaskButtons">
</template>

<template name="createAccount">
  <div class="well well-sm">
    {{> loginButtons}}
    <br/>
    <br/>
    <small class="text-muted"> TODO:  Implement account creation here.  Account creation can be done via the "signin" button above for the moment. </small>
  </div>
</template>

<template name="provideLocation">
  <div class="well well-sm">
    <p> Tell us where you are </p>
    {{> setLocation}}
    <br/>
  </div>
</template>

<!-- TODO:  Eliminate code duplication between this and userSettings. -->
<template name="setLocation">
  <div class="form-group row">
    <label for="user-street" class="col-xs-2 col-form-label"> Street </label>
    <div class="col-xs-10">
      <input class="form-control" type="text" placeholder="Enter street address" id="user-street"/>
    </div>
  </div>

  <div class="form-group row">
    <label for="user-city" class="col-xs-2 col-form-label"> City </label>
    <div class="col-xs-10">
      <input class="form-control" type="text" placeholder="Enter city" id="user-city"/>
    </div>
  </div>

  <div class="form-group row">
    <label for="user-state" class="col-xs-3 col-sm-2 col-form-label"> State </label>
    <div class="col-xs-9 col-sm-10">
      <!-- TODO:  Enable select2 here or standardize on no-select2. -->
      <select class="form-control" id="user-state">
        <option disabled value="na"> Select State </option>
        {{> selectStates}}
      </select>
    </div>
  </div>

  <div class="form-group row">
    <label for="user-zip" class="col-xs-2 col-form-label"> Zip Code </label>
    <div class="col-xs-10">
      <input class="form-control" type="text" placeholder="Enter zip code" id="user-zip"/>
    </div>
  </div>
  
  <button type="submit" class="btn btn-primary js-location-submit"> Submit </button>
</template>

<!-- TODO:  Put this someplace better. Finish implementation.-->
<template name="loginPane">
  <div id="login-buttons">
    <div class="login-text-and-button">
      <div class="login-button single-login-button " id="login-buttons-facebook">
        <div class="login-image" id="login-buttons-image-facebook"></div>
        <span id="sign-in-facebook" class="text-besides-image sign-in-text-facebook">Sign in with Facebook</span>
      </div>
      <br>
    </div>
    <div class="login-text-and-button">
      <div class="login-button single-login-button " id="login-buttons-google">
        <div class="login-image" id="login-buttons-image-google"></div>
        <span id="sign-in-google" class="text-besides-image sign-in-text-google">Sign in with Google</span> 
      </div>
    </div>
  </div>
</template>