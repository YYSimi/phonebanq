<template name="anonymousTasks">
  {{#if currentUser}}
    {{> myTasks}}
  {{else}}
    {{> anonymousTasksActual }}
  {{/if}}
</template>

<template name="anonymousTasksActual">
  <p>  Grassroots Champion is a left-leaning civic engagement platform. We streamline the process of finding meaningful civic action.  Enter your city and state below for a sample call to action, or create an account to receive regular updates, track your progress, and help us provide you with the oppotunities that are most relavent to you. </p>
  <p>  This site is currently a work-in-progress.  Pardon our dust and exposed wiring -- we're working hard to turn this idea into reality.</p>
  <div class="row">
    <div class="col-xs-5"> {{> createAccount}} </div>
    <div class="col-xs-2"> <p class="text-center"> -or- </p> </div>
    <div class="col-xs-5"> {{> provideLocation}} </div>
  </div>
  <hr />
  {{#if Template.subscriptionsReady}}
    <ul class="list-group js-userTasks-list">
      {{#each taskAndDetail in getTopTasks}}
        <li class="list-group-item" style="border: none">
          {{> UserTask context=taskAndDetail buttonsTemplate="noTaskButtons"}}
        </li>
      {{/each}}
    </ul>
  {{else}}
  <!-- TODO:  This never displays for some reason.  Subscriptions always seem ready, even when we're waiting. -->
    {{> loader}}
  {{/if}}

</template>

<template name="noTaskButtons">
</template>

<template name="createAccount">
  <div class="well well-sm">
    {{> loginButtons}}
    <br/>
    <br/>
    <small class="text-muted"> TODO:  Implement account creation here.  Account creation can be done via the "signin" button above for the moment. </small>
  </div>
</template>

<template name="provideLocation">
  <div class="well well-sm">
    <p> Tell us where you are </p>
    {{> setLocation}}
    <br/>
  </div>
</template>

<!-- TODO:  Eliminate code duplication between this and userSettings. -->
<template name="setLocation">
  <div class="form-group row">
    <label for="user-street" class="col-xs-2 col-form-label"> Street </label>
    <div class="col-xs-10">
      <input class="form-control" type="text" placeholder="Enter street address" id="user-street"/>
    </div>
  </div>

  <div class="form-group row">
    <label for="user-city" class="col-xs-2 col-form-label"> City </label>
    <div class="col-xs-10">
      <input class="form-control" type="text" placeholder="Enter city" id="user-city"/>
    </div>
  </div>

  <div class="form-group row">
    <label for="user-state" class="col-xs-3 col-sm-2 col-form-label"> State </label>
    <div class="col-xs-9 col-sm-10">
      <!-- TODO:  Enable select2 here or standardize on no-select2. -->
      <select class="form-control" id="user-state">
        <option disabled value="na"> Select State </option>
        {{> selectStates}}
      </select>
    </div>
  </div>

  <div class="form-group row">
    <label for="user-zip" class="col-xs-2 col-form-label"> Zip Code </label>
    <div class="col-xs-10">
      <input class="form-control" type="text" placeholder="Enter zip code" id="user-zip"/>
    </div>
  </div>
  
  <button type="submit" class="btn btn-primary js-location-submit"> Submit </button>
</template>

<!-- TODO:  Put this someplace better. Finish implementation.-->
<template name="loginPane">
  <div id="login-buttons">
    <div class="login-text-and-button">
      <div class="login-button single-login-button " id="login-buttons-facebook">
        <div class="login-image" id="login-buttons-image-facebook"></div>
        <span id="sign-in-facebook" class="text-besides-image sign-in-text-facebook">Sign in with Facebook</span>
      </div>
      <br>
    </div>
    <div class="login-text-and-button">
      <div class="login-button single-login-button " id="login-buttons-google">
        <div class="login-image" id="login-buttons-image-google"></div>
        <span id="sign-in-google" class="text-besides-image sign-in-text-google">Sign in with Google</span> 
      </div>
    </div>
  </div>
</template>